(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"+P1L":function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var fesm2015_forms=__webpack_require__("3Pt+"),ng2_smart_table=__webpack_require__("RS3s"),theme_module=__webpack_require__("vTDv"),fesm2015_router=__webpack_require__("tyNb"),core=__webpack_require__("fXoL");let users_component_UsersComponent=(()=>{class UsersComponent{}return UsersComponent.ɵfac=function(t){return new(t||UsersComponent)},UsersComponent.ɵcmp=core["ɵɵdefineComponent"]({type:UsersComponent,selectors:[["ngx-users"]],decls:1,vars:0,template:function(rf,ctx){1&rf&&core["ɵɵelement"](0,"router-outlet")},directives:[fesm2015_router.h],encapsulation:2}),UsersComponent})();var Observable=__webpack_require__("HDdC"),Subject=__webpack_require__("XNiG"),takeUntil=__webpack_require__("1G5W"),users=__webpack_require__("2NI8"),components=__webpack_require__("Cgdg"),fesm2015=__webpack_require__("McNs"),user_store=__webpack_require__("dwCd"),_ivy_ngcc_fesm2015=__webpack_require__("aceb"),validation_message_component=__webpack_require__("6edl"),UserFormMode=function(UserFormMode){return UserFormMode.VIEW="View",UserFormMode.EDIT="Edit",UserFormMode.ADD="Add",UserFormMode.EDIT_SELF="EditSelf",UserFormMode}({});let user_component_UserComponent=(()=>{class UserComponent{constructor(usersService,router,route,tokenService,userStore,toasterService,fb){this.usersService=usersService,this.router=router,this.route=route,this.tokenService=tokenService,this.userStore=userStore,this.toasterService=toasterService,this.fb=fb,this.unsubscribe$=new Subject.a}get firstName(){return this.userForm.get("firstName")}get lastName(){return this.userForm.get("lastName")}get login(){return this.userForm.get("login")}get email(){return this.userForm.get("email")}get age(){return this.userForm.get("age")}get street(){return this.userForm.get("address").get("street")}get city(){return this.userForm.get("address").get("city")}get zipCode(){return this.userForm.get("address").get("zipCode")}setViewMode(viewMode){this.mode=viewMode}ngOnInit(){this.initUserForm(),this.loadUserData()}initUserForm(){this.userForm=this.fb.group({id:this.fb.control(""),role:this.fb.control(""),firstName:this.fb.control("",[fesm2015_forms.z.minLength(3),fesm2015_forms.z.maxLength(20)]),lastName:this.fb.control("",[fesm2015_forms.z.minLength(3),fesm2015_forms.z.maxLength(20)]),login:this.fb.control("",[fesm2015_forms.z.required,fesm2015_forms.z.minLength(6),fesm2015_forms.z.maxLength(20)]),age:this.fb.control("",[fesm2015_forms.z.required,fesm2015_forms.z.min(1),fesm2015_forms.z.max(120),fesm2015_forms.z.pattern(components.b)]),email:this.fb.control("",[fesm2015_forms.z.required,fesm2015_forms.z.pattern(components.a)]),address:this.fb.group({street:this.fb.control(""),city:this.fb.control(""),zipCode:this.fb.control("")})})}get canEdit(){return this.mode!==UserFormMode.VIEW}loadUserData(){const id=this.route.snapshot.paramMap.get("id");if(this.route.snapshot.queryParamMap.get("profile"))this.setViewMode(UserFormMode.EDIT_SELF),this.loadUser();else if(id){const currentUserId=this.userStore.getUser().id;this.setViewMode(currentUserId.toString()===id?UserFormMode.EDIT_SELF:UserFormMode.EDIT),this.loadUser(id)}else this.setViewMode(UserFormMode.ADD)}loadUser(id){(this.mode===UserFormMode.EDIT_SELF?this.usersService.getCurrentUser():this.usersService.get(id)).pipe(Object(takeUntil.a)(this.unsubscribe$)).subscribe(user=>{this.userForm.setValue({id:user.id?user.id:"",role:user.role?user.role:"",firstName:user.firstName?user.firstName:"",lastName:user.lastName?user.lastName:"",login:user.login?user.login:"",age:user.age?user.age:"",email:user.email,address:{street:user.address&&user.address.street?user.address.street:"",city:user.address&&user.address.city?user.address.city:"",zipCode:user.address&&user.address.zipCode?user.address.zipCode:""}})})}convertToUser(value){return value}save(){const user=this.convertToUser(this.userForm.value);let observable=new Observable.a;this.mode===UserFormMode.EDIT_SELF?this.usersService.updateCurrent(user).subscribe(result=>{this.tokenService.set(new fesm2015.f(result,"email",new Date)),this.handleSuccessResponse()},err=>{this.handleWrongResponse()}):observable=user.id?this.usersService.update(user):this.usersService.create(user),observable.pipe(Object(takeUntil.a)(this.unsubscribe$)).subscribe(()=>{this.handleSuccessResponse()},err=>{this.handleWrongResponse()})}handleSuccessResponse(){this.toasterService.success("",`Item ${this.mode===UserFormMode.ADD?"created":"updated"}!`),this.back()}handleWrongResponse(){this.toasterService.danger("","This email has already taken!")}back(){this.router.navigate(["/pages"])}ngOnDestroy(){this.unsubscribe$.next(),this.unsubscribe$.complete()}}return UserComponent.ɵfac=function(t){return new(t||UserComponent)(core["ɵɵdirectiveInject"](users.a),core["ɵɵdirectiveInject"](fesm2015_router.c),core["ɵɵdirectiveInject"](fesm2015_router.a),core["ɵɵdirectiveInject"](fesm2015.j),core["ɵɵdirectiveInject"](user_store.a),core["ɵɵdirectiveInject"](_ivy_ngcc_fesm2015.dc),core["ɵɵdirectiveInject"](fesm2015_forms.d))},UserComponent.ɵcmp=core["ɵɵdefineComponent"]({type:UserComponent,selectors:[["ngx-user"]],decls:47,vars:21,consts:[[1,"container",3,"formGroup"],[1,"form-group"],["for","firstName"],["nbInput","","id","firstName","formControlName","firstName","placeholder","Last Name",1,"form-control",3,"status"],["label","First Name","minLength","3","maxLength","20",3,"showMinLength","showMaxLength"],["for","lastName"],["nbInput","","id","lastName","formControlName","lastName","placeholder","Last Name",1,"form-control",3,"status"],["label","Last Name","minLength","3","maxLength","20",3,"showMinLength","showMaxLength"],["for","inputLogin"],["nbInput","","id","inputLogin","formControlName","login","placeholder","Login",1,"form-control",3,"status"],["label","Login","minLength","6","maxLength","20",3,"showMinLength","showMaxLength","showRequired"],["for","inputAge"],["nbInput","","id","inputAge","formControlName","age","placeholder","Age",1,"form-control",3,"status"],["label","Age","min","1","max","120",3,"showMin","showMax","showRequired","showPattern"],["for","inputEmail"],["nbInput","","id","inputEmail","formControlName","email","placeholder","Email",1,"form-control",3,"status"],["label","Email","min","1","max","120",3,"showPattern","showRequired"],["formGroupName","address",1,"form-group"],["for","inputStreet"],["nbInput","","id","inputStreet","placeholder","Street","formControlName","street",1,"form-control"],["for","inputCity"],["nbInput","","id","inputCity","placeholder","City","formControlName","city",1,"form-control"],["for","inputZipCode"],["nbInput","","id","inputZipCode","placeholder","Zip Code","formControlName","zipCode",1,"form-control"],["nbButton","","status","primary","hero","",3,"disabled","click"],["nbButton","","status","info","hero","",3,"click"]],template:function(rf,ctx){1&rf&&(core["ɵɵelementStart"](0,"nb-card"),core["ɵɵelementStart"](1,"nb-card-header"),core["ɵɵtext"](2),core["ɵɵelementEnd"](),core["ɵɵelementStart"](3,"nb-card-body"),core["ɵɵelementStart"](4,"div",0),core["ɵɵelementStart"](5,"div",1),core["ɵɵelementStart"](6,"label",2),core["ɵɵtext"](7,"First Name"),core["ɵɵelementEnd"](),core["ɵɵelement"](8,"input",3),core["ɵɵelement"](9,"ngx-validation-message",4),core["ɵɵelementEnd"](),core["ɵɵelementStart"](10,"div",1),core["ɵɵelementStart"](11,"label",5),core["ɵɵtext"](12,"Last Name"),core["ɵɵelementEnd"](),core["ɵɵelement"](13,"input",6),core["ɵɵelement"](14,"ngx-validation-message",7),core["ɵɵelementEnd"](),core["ɵɵelementStart"](15,"div",1),core["ɵɵelementStart"](16,"label",8),core["ɵɵtext"](17,"Login"),core["ɵɵelementEnd"](),core["ɵɵelement"](18,"input",9),core["ɵɵelement"](19,"ngx-validation-message",10),core["ɵɵelementEnd"](),core["ɵɵelementStart"](20,"div",1),core["ɵɵelementStart"](21,"label",11),core["ɵɵtext"](22,"Age"),core["ɵɵelementEnd"](),core["ɵɵelement"](23,"input",12),core["ɵɵelement"](24,"ngx-validation-message",13),core["ɵɵelementEnd"](),core["ɵɵelementStart"](25,"div",1),core["ɵɵelementStart"](26,"label",14),core["ɵɵtext"](27,"Email"),core["ɵɵelementEnd"](),core["ɵɵelement"](28,"input",15),core["ɵɵelement"](29,"ngx-validation-message",16),core["ɵɵelementEnd"](),core["ɵɵelementStart"](30,"div",17),core["ɵɵelementStart"](31,"label",18),core["ɵɵtext"](32,"Street"),core["ɵɵelementEnd"](),core["ɵɵelement"](33,"input",19),core["ɵɵelementEnd"](),core["ɵɵelementStart"](34,"div",17),core["ɵɵelementStart"](35,"label",20),core["ɵɵtext"](36,"City"),core["ɵɵelementEnd"](),core["ɵɵelement"](37,"input",21),core["ɵɵelementEnd"](),core["ɵɵelementStart"](38,"div",17),core["ɵɵelementStart"](39,"label",22),core["ɵɵtext"](40,"Zip Code"),core["ɵɵelementEnd"](),core["ɵɵelement"](41,"input",23),core["ɵɵelementEnd"](),core["ɵɵelementEnd"](),core["ɵɵelementEnd"](),core["ɵɵelementStart"](42,"nb-card-footer"),core["ɵɵelementStart"](43,"button",24),core["ɵɵlistener"]("click",(function(){return ctx.save()})),core["ɵɵtext"](44,"Submit"),core["ɵɵelementEnd"](),core["ɵɵelementStart"](45,"button",25),core["ɵɵlistener"]("click",(function(){return ctx.back()})),core["ɵɵtext"](46,"Back"),core["ɵɵelementEnd"](),core["ɵɵelementEnd"](),core["ɵɵelementEnd"]()),2&rf&&(core["ɵɵadvance"](2),core["ɵɵtextInterpolate1"]("",ctx.mode," user"),core["ɵɵadvance"](2),core["ɵɵproperty"]("formGroup",ctx.userForm),core["ɵɵadvance"](4),core["ɵɵproperty"]("status",null!=ctx.firstName&&ctx.firstName.hasError("minlength")||null!=ctx.firstName&&ctx.firstName.hasError("maxlength")?"danger":"primary"),core["ɵɵadvance"](1),core["ɵɵproperty"]("showMinLength",null==ctx.firstName?null:ctx.firstName.hasError("minlength"))("showMaxLength",null==ctx.firstName?null:ctx.firstName.hasError("maxlength")),core["ɵɵadvance"](4),core["ɵɵproperty"]("status",null!=ctx.lastName&&ctx.lastName.hasError("minlength")||null!=ctx.lastName&&ctx.lastName.hasError("maxlength")?"danger":"primary"),core["ɵɵadvance"](1),core["ɵɵproperty"]("showMinLength",null==ctx.lastName?null:ctx.lastName.hasError("minlength"))("showMaxLength",null==ctx.lastName?null:ctx.lastName.hasError("maxlength")),core["ɵɵadvance"](4),core["ɵɵproperty"]("status",(null!=ctx.login&&null!=ctx.login.errors&&ctx.login.errors.required||null!=ctx.login&&ctx.login.hasError("minlength")||null!=ctx.login&&ctx.login.hasError("maxlength"))&&ctx.login.touched?"danger":"primary"),core["ɵɵadvance"](1),core["ɵɵproperty"]("showMinLength",null==ctx.login?null:ctx.login.hasError("minlength"))("showMaxLength",null==ctx.login?null:ctx.login.hasError("maxlength"))("showRequired",(null==ctx.login?null:null==ctx.login.errors?null:ctx.login.errors.required)&&ctx.login.touched),core["ɵɵadvance"](4),core["ɵɵproperty"]("status",(null!=ctx.age&&null!=ctx.age.errors&&ctx.age.errors.required||null!=ctx.age&&null!=ctx.age.errors&&ctx.age.errors.min||null!=ctx.age&&null!=ctx.age.errors&&ctx.age.errors.max||null!=ctx.age&&ctx.age.hasError("pattern"))&&ctx.age.touched?"danger":"primary"),core["ɵɵadvance"](1),core["ɵɵproperty"]("showMin",(null==ctx.age?null:null==ctx.age.errors?null:ctx.age.errors.min)&&ctx.age.touched)("showMax",(null==ctx.age?null:null==ctx.age.errors?null:ctx.age.errors.max)&&ctx.age.touched)("showRequired",(null==ctx.age?null:null==ctx.age.errors?null:ctx.age.errors.required)&&ctx.age.touched)("showPattern",null==ctx.age?null:ctx.age.hasError("pattern")),core["ɵɵadvance"](4),core["ɵɵproperty"]("status",(null!=ctx.email&&null!=ctx.email.errors&&ctx.email.errors.required||null!=ctx.email&&ctx.email.hasError("pattern"))&&ctx.email.touched?"danger":"primary"),core["ɵɵadvance"](1),core["ɵɵproperty"]("showPattern",(null==ctx.email?null:ctx.email.hasError("pattern"))&&ctx.email.touched)("showRequired",(null==ctx.email?null:null==ctx.email.errors?null:ctx.email.errors.required)&&ctx.email.touched),core["ɵɵadvance"](14),core["ɵɵproperty"]("disabled",!ctx.userForm.valid))},directives:[_ivy_ngcc_fesm2015.B,_ivy_ngcc_fesm2015.D,_ivy_ngcc_fesm2015.A,fesm2015_forms.q,fesm2015_forms.h,_ivy_ngcc_fesm2015.cb,fesm2015_forms.b,fesm2015_forms.p,fesm2015_forms.g,validation_message_component.a,fesm2015_forms.i,_ivy_ngcc_fesm2015.C,_ivy_ngcc_fesm2015.p],styles:[".nb-theme-default   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.25rem}.nb-theme-default   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;justify-content:space-around}.nb-theme-default   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:20rem}[dir=ltr]   .nb-theme-default   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 .75rem 0 0}[dir=rtl]   .nb-theme-default   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 0 0 .75rem}.nb-theme-dark   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.25rem}.nb-theme-dark   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;justify-content:space-around}.nb-theme-dark   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:20rem}[dir=ltr]   .nb-theme-dark   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 .75rem 0 0}[dir=rtl]   .nb-theme-dark   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 0 0 .75rem}.nb-theme-cosmic   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.25rem}.nb-theme-cosmic   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;justify-content:space-around}.nb-theme-cosmic   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:20rem}[dir=ltr]   .nb-theme-cosmic   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 .75rem 0 0}[dir=rtl]   .nb-theme-cosmic   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 0 0 .75rem}.nb-theme-corporate   [_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.25rem}.nb-theme-corporate   [_nghost-%COMP%]   .container[_ngcontent-%COMP%]{display:-webkit-box;display:flex;flex-wrap:wrap;justify-content:space-around}.nb-theme-corporate   [_nghost-%COMP%]   input[_ngcontent-%COMP%]{width:20rem}[dir=ltr]   .nb-theme-corporate   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 .75rem 0 0}[dir=rtl]   .nb-theme-corporate   [_nghost-%COMP%]   -shadowcsshost   button[_ngcontent-%COMP%]{margin:0 0 0 .75rem}"]}),UserComponent})();var admin_guard=__webpack_require__("pfsP");const routes=[{path:"",component:users_component_UsersComponent,children:[{path:"edit/:id",canActivate:[admin_guard.a],component:user_component_UserComponent},{path:"current",component:user_component_UserComponent},{path:"add",canActivate:[admin_guard.a],component:user_component_UserComponent}]}];let users_routing_module_UsersRoutingModule=(()=>{class UsersRoutingModule{}return UsersRoutingModule.ɵmod=core["ɵɵdefineNgModule"]({type:UsersRoutingModule}),UsersRoutingModule.ɵinj=core["ɵɵdefineInjector"]({factory:function(t){return new(t||UsersRoutingModule)},imports:[[fesm2015_router.g.forChild(routes)],fesm2015_router.g]}),UsersRoutingModule})();var auth_module=__webpack_require__("gcnP"),components_module=__webpack_require__("h+2I");__webpack_require__.d(__webpack_exports__,"UsersModule",(function(){return users_module_UsersModule}));const NB_MODULES=[_ivy_ngcc_fesm2015.m,_ivy_ngcc_fesm2015.q,_ivy_ngcc_fesm2015.E,_ivy_ngcc_fesm2015.db,_ivy_ngcc_fesm2015.Zb,_ivy_ngcc_fesm2015.uc,_ivy_ngcc_fesm2015.Ab,_ivy_ngcc_fesm2015.Ib,_ivy_ngcc_fesm2015.nb,_ivy_ngcc_fesm2015.ab,_ivy_ngcc_fesm2015.Qb,_ivy_ngcc_fesm2015.R,_ivy_ngcc_fesm2015.db];let users_module_UsersModule=(()=>{class UsersModule{}return UsersModule.ɵmod=core["ɵɵdefineNgModule"]({type:UsersModule}),UsersModule.ɵinj=core["ɵɵdefineInjector"]({factory:function(t){return new(t||UsersModule)},providers:[],imports:[[theme_module.a,auth_module.AuthModule,ng2_smart_table.d,users_routing_module_UsersRoutingModule,components_module.a,fesm2015_forms.w,...NB_MODULES]]}),UsersModule})()}}]);